import React, { createContext, useState, useCallback } from 'react';

// Developed by Sami
// Provides in-memory storage for educational contents until backend is integrated.
export const EducationalContentContext = createContext({
  items: [],
  addOrUpdate: () => {},
  remove: () => {},
});

export const EducationalContentProvider = ({ children }) => {
  const [items, setItems] = useState([
    // مكتبة صحة شاملة
    {
      id: 1,
      title: 'التهاب الكبد الفيروسي B - نظرة عامة',
      type: 'مقال',
      content:
        'التهاب الكبد الفيروسي B هو عدوى تصيب الكبد يسببها فيروس HBV. يمكن أن تكون العدوى حادة أو مزمنة وقد تؤدي إلى مضاعفات خطيرة مثل تليف الكبد وسرطان الكبد.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },

    // الأسئلة الشائعة
    {
      id: 2,
      title: 'ما هو التهاب الكبد الفيروسي B؟',
      type: 'سؤال شائع',
      content:
        'التهاب الكبد الفيروسي B هو عدوى فيروسية تستهدف الكبد يسببها فيروس HBV. قد تكون العدوى قصيرة الأمد أو مزمنة ويمكن أن تؤدي إلى تليف أو سرطان الكبد.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 3,
      title: 'كيف ينتقل فيروس التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'ينتقل الفيروس عبر ملامسة سوائل جسم مصابة مثل: (1) من الأم إلى الطفل أثناء الولادة، (2) التعرض للدم الملوث أو مشاركة الإبر، (3) الاتصال الجنسي غير المحمي، (4) مشاركة الأدوات الشخصية مثل شفرات الحلاقة أو فرش الأسنان.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 4,
      title: 'ما هي أعراض التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'قد لا تظهر أعراض في البداية. عند ظهورها قد تشمل: تعب شديد، آلام في البطن، فقدان الشهية، غثيان، اصفرار الجلد والعينين (يرقان)، بول داكن، وبراز فاتح اللون.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 5,
      title: 'كيف يتم تشخيص التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'يتم التشخيص عبر فحوصات الدم للكشف عن الفيروس أو الأجسام المضادة، اختبارات وظائف الكبد لتقييم الضرر، وفي بعض الحالات خزعة كبدية.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 6,
      title: 'ما هو علاج التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'العلاج يعتمد على نوع العدوى: العدوى الحادة غالباً تُعالج بالدعم مثل الراحة والتغذية السليمة. العدوى المزمنة قد تتطلب أدوية مضادة للفيروسات لتقليل التكاثر الفيروسي، وفي الحالات المتقدمة قد تُجرى زراعة كبد.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 7,
      title: 'كيف يمكن الوقاية من التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'أهم التدابير الوقائية: التطعيم، الممارسات الجنسية الآمنة، تجنب مشاركة الأدوات الشخصية، ضمان تعقيم الأدوات الطبية والتجميلية، وفحص النساء الحوامل.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 8,
      title: 'ما هو وضع التهاب الكبد B في فلسطين؟',
      type: 'سؤال شائع',
      content:
        'أعلنت وزارة الصحة الفلسطينية أنه لم يُسجل أي إصابة بالتهاب الكبد B بين المواليد منذ 1992 بفضل برامج التطعيم الوطنية، وبلغ معدل الإصابات 0.28 لكل 100,000 نسمة عام 2022.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 9,
      title: 'هل يمكن الشفاء التام من التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'نعم، يمكن أن يتخلّص البالغون الأصحاء من العدوى الحادة بشكل كامل، لكن قد تصبح العدوى مزمنة لدى بعض الأشخاص وتتطلب متابعة طبية مستمرة.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 10,
      title: 'هل يمكن أن أعيش حياة طبيعية مع التهاب الكبد B؟',
      type: 'سؤال شائع',
      content:
        'مع الالتزام بالعلاج والمتابعة الطبية وتجنب العوامل المضرة بالكبد، يستطيع المريض أن يعيش حياة طبيعية ويقلل خطر المضاعفات.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 11,
      title: 'هل يمكن أن أنقل العدوى لأفراد عائلتي؟',
      type: 'سؤال شائع',
      content:
        'يمكن ذلك إذا لم يحصلوا على اللقاح أو لم يتخذوا الإجراءات الوقائية، لكن لا ينتقل الفيروس عبر المصافحة أو مشاركة الطعام.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 12,
      title: 'هل يؤثر المرض على الحمل؟',
      type: 'سؤال شائع',
      content:
        'يمكن أن ينتقل الفيروس من الأم إلى الطفل أثناء الولادة، لكن يمكن منع ذلك بإعطاء الطفل اللقاح وجرعة مناعية فور الولادة.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
    {
      id: 13,
      title: 'ما نصائح الحفاظ على صحة الكبد؟',
      type: 'سؤال شائع',
      content:
        'تتضمن النصائح: تجنب التدخين والكحول، اتباع نظام غذائي متوازن، ممارسة الرياضة بانتظام، وإجراء فحوصات دورية.',
      publishDate: '2025-07-31',
      author: 'فريق التثقيف الصحي',
    },
  ]);

  const addOrUpdate = useCallback((item) => {
    setItems((prev) => {
      const idx = prev.findIndex((i) => i.id === item.id);
      if (idx !== -1) {
        const updated = [...prev];
        updated[idx] = item;
        return updated;
      }
      return [...prev, item];
    });
  }, []);

  const remove = useCallback((id) => {
    setItems((prev) => prev.filter((i) => i.id !== id));
  }, []);

  return (
    <EducationalContentContext.Provider value={{ items, addOrUpdate, remove }}>
      {children}
    </EducationalContentContext.Provider>
  );
};
